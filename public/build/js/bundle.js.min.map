{"version":3,"sources":["hours.js","tags.js"],"names":["document","querySelector","search","category_id","day_id","category","days","querySelectorAll","inputHiddenHour","endSearch","e","target","name","value","Object","values","includes","async","url","result","fetch","events","assignedHours","map","event","hour_id","hoursList","hoursListArray","Array","from","filter","li","dataset","hourId","forEach","classList","remove","hour","addEventListener","selectHour","getAvailableHours","json","searchEvents","prevHour","add","day","tagsInput","tagsDiv","tagsInputHidden","tags","showTags","textContent","tag","tagElement","createElement","toUpperCase","substring","ondblclick","deleteTag","appendChild","updateInputHidden","toLowerCase","toString","split","keyCode","preventDefault","exec","trim"],"mappings":"CAAA,WAGA,GAFAA,SAAAC,cAAA,UAEA,CACA,IAAAC,EAAA,CACAC,YAAA,GACAC,OAAA,IAGA,MAAAC,EAAAL,SAAAC,cAAA,sBACAK,EAAAN,SAAAO,iBAAA,iBAEAC,GADAR,SAAAC,cAAA,iBACAD,SAAAC,cAAA,mBAMA,SAAAQ,EAAAC,GACAR,EAAAQ,EAAAC,OAAAC,MAAAF,EAAAC,OAAAE,MACAC,OAAAC,OAAAb,GAAAc,SAAA,KAMAC,iBAEA,MAAAb,OAAAA,EAAAD,YAAAA,GAAAD,EACAgB,EAAA,+BAAAd,iBAAAD,IACAgB,QAAAC,MAAAF,IAKA,SAAAG,GAEA,MAAAC,EAAAD,EAAAE,IAAAC,GAAAA,EAAAC,SACAC,EAAA1B,SAAAO,iBAAA,aACAoB,EAAAC,MAAAC,KAAAH,GACAC,EAAAG,OAAAC,IAAAT,EAAAN,SAAAe,EAAAC,QAAAC,SACAC,QAAAH,GAAAA,EAAAI,UAAAC,OAAA,0BAEApC,SAAAO,iBAAA,yCACA2B,QAAAG,IACAA,EAAAC,iBAAA,QAAAC,KAbAC,OADArB,EAAAsB,QARAC,GA0BA,SAAAH,EAAA7B,GAEA,MAAAiC,EAAA3C,SAAAC,cAAA,0BACA0C,GACAA,EAAAR,UAAAC,OAAA,yBAGA1B,EAAAC,OAAAwB,UAAAS,IAAA,yBACApC,EAAAK,MAAAH,EAAAC,OAAAqB,QAAAC,OA5CA5B,EAAAiC,iBAAA,SAAA7B,GACAH,EAAA4B,QAAAW,IACAA,EAAAP,iBAAA,SAAA7B,MAfA,GCAA,WACA,MAAAqC,EAAA9C,SAAAC,cAAA,eACA,GAAA6C,EAAA,CAEA,MAAAC,EAAA/C,SAAAC,cAAA,SACA+C,EAAAhD,SAAAC,cAAA,iBAEA,IAAAgD,EAAA,GA8BA,SAAAC,IACAH,EAAAI,YAAA,GACAF,EAAAf,QAAAkB,IACA,MAAAC,EAAArD,SAAAsD,cAAA,MACAD,EAAAlB,UAAAS,IAAA,aACAS,EAAAF,YAAAC,EAAA,GAAAG,cAAAH,EAAAI,UAAA,GACAH,EAAAI,WAAAC,EACAX,EAAAY,YAAAN,KAEAO,IAGA,SAAAF,EAAAhD,GACAA,EAAAC,OAAAyB,SACAa,EAAAA,EAAAnB,OAAAsB,GAAAA,IAAA1C,EAAAC,OAAAwC,YAAAU,eACAD,IAGA,SAAAA,IACAZ,EAAAnC,MAAAoC,EAAAa,WA9CA,KAAAd,EAAAnC,QACAoC,EAAAD,EAAAnC,MAAAkD,MAAA,KACAb,KAIAJ,EAAAR,iBAAA,YAEA,SAAA5B,GACA,GAAA,KAAAA,EAAAsD,QAAA,CACAtD,EAAAuD,iBAEA,IADA,iDACAC,KAAAxD,EAAAC,OAAAE,MAAAsD,QAEA,YADArB,EAAAjC,MAAA,IAGA,GAAAoC,EAAAjC,SAAAN,EAAAC,OAAAE,MAAAgD,eAEA,YADAf,EAAAjC,MAAA,IAIAoC,EAAA,IAAAA,EAAAvC,EAAAC,OAAAE,MAAAgD,cAAAM,QACArB,EAAAjC,MAAA,GACAqC,SAjCA","file":"bundle.js","sourcesContent":["(function() {\r\n  const hours = document.querySelector('#hours');\r\n  \r\n  if(hours) {\r\n    let search = {\r\n      category_id: '',\r\n      day_id: ''\r\n    };\r\n\r\n    const category = document.querySelector('[name=category_id]');\r\n    const days = document.querySelectorAll('[name=day_id]');\r\n    const inputHiddenDay = document.querySelector('[name=day_id]');\r\n    const inputHiddenHour = document.querySelector('[name=hour_id]');\r\n    category.addEventListener('change', endSearch);\r\n    days.forEach(day => {\r\n      day.addEventListener('change', endSearch);\r\n    });\r\n\r\n    function endSearch(e) {\r\n      search[e.target.name] = e.target.value;\r\n      if(Object.values(search).includes('')) {\r\n        return ;\r\n      }\r\n      searchEvents();\r\n    }\r\n\r\n    async function searchEvents(){\r\n      // Get ids\r\n      const { day_id, category_id } = search;\r\n      const url = `/api/eventos-horario?day_id=${day_id}&category_id=${category_id}`;\r\n      const result = await fetch(url);\r\n      const events = await result.json();\r\n      getAvailableHours(events);\r\n    }\r\n\r\n    function getAvailableHours(events) {\r\n      // Check assigned events and remove the disabled class\r\n      const assignedHours = events.map(event => event.hour_id);\r\n      const hoursList = document.querySelectorAll('#hours li');\r\n      const hoursListArray = Array.from(hoursList);\r\n      const unassignedHours = hoursListArray.filter(li => !assignedHours.includes(li.dataset.hourId));\r\n      unassignedHours.forEach(li => li.classList.remove('hours__hour--disabled'));\r\n\r\n      const availableHours = document.querySelectorAll('#hours li:not(.hours__hour--disabled)');\r\n      availableHours.forEach(hour => {\r\n        hour.addEventListener('click', selectHour);\r\n      });\r\n    }\r\n\r\n    function selectHour(e) {\r\n      // Deactive prev hour, if there is a new click\r\n      const prevHour = document.querySelector('.hours__hour--selected');\r\n      if(prevHour) {\r\n        prevHour.classList.remove('hours__hour--selected');\r\n      }\r\n      // Add selected class\r\n      e.target.classList.add('hours__hour--selected');\r\n      inputHiddenHour.value = e.target.dataset.hourId;\r\n    }\r\n  }\r\n})();","(function() {\r\n  const tagsInput = document.querySelector('#tags_input');\r\n  if(tagsInput) {\r\n\r\n    const tagsDiv = document.querySelector('#tags');\r\n    const tagsInputHidden = document.querySelector('[name=\"tags\"]');\r\n\r\n    let tags = [];\r\n\r\n    // Get tags from hidden input\r\n    if(tagsInputHidden.value !== '') {\r\n      tags = tagsInputHidden.value.split(',');\r\n      showTags();\r\n    }\r\n\r\n    // Listening to changes in the input\r\n    tagsInput.addEventListener('keypress', saveTag);\r\n\r\n    function saveTag(e) {\r\n      if(e.keyCode === 44) {\r\n        e.preventDefault();\r\n        const regexp = /^([A-Za-z0-9\\u002e\\u002b\\u0023\\u0020]){2,15}$/i;\r\n        if(!regexp.exec(e.target.value.trim())) {\r\n          tagsInput.value = '';\r\n          return;\r\n        } \r\n        if (tags.includes(e.target.value.toLowerCase())) {\r\n          tagsInput.value = '';\r\n          return;\r\n        }\r\n        \r\n        tags = [...tags, e.target.value.toLowerCase().trim()];\r\n        tagsInput.value = '';\r\n        showTags();\r\n      }\r\n    }\r\n\r\n    function showTags() {\r\n      tagsDiv.textContent = '';\r\n      tags.forEach(tag => {\r\n        const tagElement = document.createElement('LI');\r\n        tagElement.classList.add('form__tag');\r\n        tagElement.textContent = tag[0].toUpperCase() + tag.substring(1);\r\n        tagElement.ondblclick = deleteTag;\r\n        tagsDiv.appendChild(tagElement);\r\n      })\r\n      updateInputHidden();\r\n    }\r\n    \r\n    function deleteTag(e) {\r\n      e.target.remove();\r\n      tags = tags.filter(tag => tag !== e.target.textContent.toLowerCase());\r\n      updateInputHidden();\r\n    }\r\n\r\n    function updateInputHidden() {\r\n      tagsInputHidden.value = tags.toString();\r\n    }\r\n\r\n  }\r\n})();\r\n"]}